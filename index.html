<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Open App</title>
  <style>
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;padding:24px}
    .card{max-width:520px;margin:0 auto;padding:20px;border:1px solid #eee;border-radius:14px}
    .btn{display:inline-block;padding:12px 14px;border-radius:12px;text-decoration:none;border:0;cursor:pointer}
    .primary{background:#111827;color:#fff}
    .muted{color:#6b7280;font-size:14px;margin-top:10px}
    input{width:100%;padding:10px;border:1px solid #e5e7eb;border-radius:10px;margin:10px 0}
  </style>
</head>
<body>
  <div class="card">
    <h2>Deeplink demo1</h2>
    <p class="muted">Masukkan path, lalu klik “Buka Aplikasi”.</p>

    <label>Path (contoh: paket/12)</label>
    <input id="path" value="paket/12" />

    <button class="btn primary" id="openBtn">Buka Aplikasi</button>
    <p class="muted" id="status"></p>
  </div>

  <script>
    // ====== KONFIG ======
    const schemeBase = "labara://"; // contoh: labara://paket/12
    const androidStore = "https://play.google.com/store/apps/details?id=YOUR_PACKAGE_NAME";
    const iosStore = "https://apps.apple.com/app/idYOUR_IOS_APP_ID";
    const fallbackWeb = "https://example.com"; // optional

    const ua = navigator.userAgent || "";
    const isAndroid = /Android/i.test(ua);
    const isiOS = /iPhone|iPad|iPod/i.test(ua);

    function openApp() {
      const path = (document.getElementById("path").value || "").replace(/^\/+/, "");
      const deepLink = schemeBase + path;

      document.getElementById("status").textContent = "Mencoba membuka: " + deepLink;

      const start = Date.now();
      window.location.href = '/home';

      // setTimeout(() => {
      //   const elapsed = Date.now() - start;

      //   // Jika masih di halaman ini, fallback.
      //   // (Heuristik sederhana untuk demo)
      //   if (elapsed < 1700) {
      //     document.getElementById("status").textContent =
      //       "App tidak terbuka. Mengarahkan ke fallback…";

      //     if (isAndroid) window.location.href = androidStore;
      //     else if (isiOS) window.location.href = iosStore;
      //     else window.location.href = fallbackWeb;
      //   }
      // }, 1200);
    }

    document.getElementById("openBtn").addEventListener("click", openApp);
  </script>
</body>
</html>
